{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ri/new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _defineProperty from\"/Users/ri/new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _asyncToGenerator from\"/Users/ri/new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/ri/new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{useReducer}from'react';import axios from'axios';import{FirebaseContext}from'./firebaseContext';import{firebaseReducer}from'./firebaseReducer';import{ADD_NOTE,FETCH_NOTES,REMOVE_NOTE,SHOW_LOADER}from'../types';var url=process.env.REACT_APP_DB_URL;export var FirebaseState=function FirebaseState(_ref){var children=_ref.children;var initialState={notes:[],loading:false};var _useReducer=useReducer(firebaseReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var showLoader=function showLoader(){return dispatch({type:SHOW_LOADER});};var fetchNotes=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,payload;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:showLoader();_context.next=3;return axios.get(\"\".concat(url,\"/notes.json\"));case 3:res=_context.sent;payload=Object.keys(res.data).map(function(key){return _objectSpread({},res.data[key],{id:key});});dispatch({type:FETCH_NOTES,payload:payload});case 6:case\"end\":return _context.stop();}}},_callee);}));return function fetchNotes(){return _ref2.apply(this,arguments);};}();var addNote=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(title){var note,res,payload;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:note={title:title,date:new Date().toJSON()};_context2.prev=1;_context2.next=4;return axios.post(\"\".concat(url,\"/notes.json\"),note);case 4:res=_context2.sent;payload=_objectSpread({},note,{id:res.data.name});dispatch({type:ADD_NOTE,payload:payload});_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](1);throw new Error(_context2.t0.message);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[1,9]]);}));return function addNote(_x){return _ref3.apply(this,arguments);};}();var removeNote=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.delete(\"\".concat(url,\"/notes/\").concat(id,\".json\"));case 2:dispatch({type:REMOVE_NOTE,payload:id});case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function removeNote(_x2){return _ref4.apply(this,arguments);};}();return React.createElement(FirebaseContext.Provider,{value:{showLoader:showLoader,addNote:addNote,removeNote:removeNote,fetchNotes:fetchNotes,loading:state.loading,notes:state.notes}},children);};","map":{"version":3,"sources":["/Users/ri/new/src/context/firebase/FirebaseState.js"],"names":["React","useReducer","axios","FirebaseContext","firebaseReducer","ADD_NOTE","FETCH_NOTES","REMOVE_NOTE","SHOW_LOADER","url","process","env","REACT_APP_DB_URL","FirebaseState","children","initialState","notes","loading","state","dispatch","showLoader","type","fetchNotes","get","res","payload","Object","keys","data","map","key","id","addNote","title","note","date","Date","toJSON","post","name","Error","message","removeNote","delete"],"mappings":"2xCAAA,MAAOA,CAAAA,KAAP,EAAeC,UAAf,KAAgC,OAAhC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,eAAR,KAA8B,mBAA9B,CACA,OAAQC,eAAR,KAA8B,mBAA9B,CACA,OAAQC,QAAR,CAAkBC,WAAlB,CAA+BC,WAA/B,CAA4CC,WAA5C,KAA8D,UAA9D,CAEA,GAAMC,CAAAA,GAAG,CAAGC,OAAO,CAACC,GAAR,CAAYC,gBAAxB,CAEA,MAAO,IAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,MAAgB,IAAdC,CAAAA,QAAc,MAAdA,QAAc,CAC3C,GAAMC,CAAAA,YAAY,CAAG,CACnBC,KAAK,CAAE,EADY,CAEnBC,OAAO,CAAE,KAFU,CAArB,CAD2C,gBAKjBhB,UAAU,CAACG,eAAD,CAAkBW,YAAlB,CALO,4CAKpCG,KALoC,iBAK7BC,QAL6B,iBAO3C,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,SAAMD,CAAAA,QAAQ,CAAC,CAACE,IAAI,CAAEb,WAAP,CAAD,CAAd,EAAnB,CAEA,GAAMc,CAAAA,UAAU,2FAAG,mJACjBF,UAAU,GADO,sBAEClB,CAAAA,KAAK,CAACqB,GAAN,WAAad,GAAb,gBAFD,QAEXe,GAFW,eAIXC,OAJW,CAIDC,MAAM,CAACC,IAAP,CAAYH,GAAG,CAACI,IAAhB,EAAsBC,GAAtB,CAA0B,SAAAC,GAAG,CAAI,CAC/C,wBACKN,GAAG,CAACI,IAAJ,CAASE,GAAT,CADL,EAEEC,EAAE,CAAED,GAFN,GAID,CALe,CAJC,CAWjBX,QAAQ,CAAC,CAACE,IAAI,CAAEf,WAAP,CAAoBmB,OAAO,CAAPA,OAApB,CAAD,CAAR,CAXiB,sDAAH,kBAAVH,CAAAA,UAAU,2CAAhB,CAcA,GAAMU,CAAAA,OAAO,2FAAG,kBAAMC,KAAN,2IACRC,IADQ,CACD,CACXD,KAAK,CAALA,KADW,CACJE,IAAI,CAAE,GAAIC,CAAAA,IAAJ,GAAWC,MAAX,EADF,CADC,yCAMMnC,CAAAA,KAAK,CAACoC,IAAN,WAAc7B,GAAd,gBAAgCyB,IAAhC,CANN,QAMNV,GANM,gBAONC,OAPM,kBAQPS,IARO,EASVH,EAAE,CAAEP,GAAG,CAACI,IAAJ,CAASW,IATH,GAYZpB,QAAQ,CAAC,CAACE,IAAI,CAAEhB,QAAP,CAAiBoB,OAAO,CAAPA,OAAjB,CAAD,CAAR,CAZY,wFAeN,IAAIe,CAAAA,KAAJ,CAAU,aAAEC,OAAZ,CAfM,uEAAH,kBAAPT,CAAAA,OAAO,6CAAb,CAmBA,GAAMU,CAAAA,UAAU,2FAAG,kBAAMX,EAAN,6IACX7B,CAAAA,KAAK,CAACyC,MAAN,WAAgBlC,GAAhB,mBAA6BsB,EAA7B,UADW,QAGjBZ,QAAQ,CAAC,CACPE,IAAI,CAAEd,WADC,CAEPkB,OAAO,CAAEM,EAFF,CAAD,CAAR,CAHiB,wDAAH,kBAAVW,CAAAA,UAAU,8CAAhB,CASA,MACE,qBAAC,eAAD,CAAiB,QAAjB,EAA0B,KAAK,CAAE,CAC/BtB,UAAU,CAAVA,UAD+B,CACnBY,OAAO,CAAPA,OADmB,CACVU,UAAU,CAAVA,UADU,CACEpB,UAAU,CAAVA,UADF,CAE/BL,OAAO,CAAEC,KAAK,CAACD,OAFgB,CAG/BD,KAAK,CAAEE,KAAK,CAACF,KAHkB,CAAjC,EAKGF,QALH,CADF,CASD,CA5DM","sourcesContent":["import React, {useReducer} from 'react'\nimport axios from 'axios'\nimport {FirebaseContext} from './firebaseContext'\nimport {firebaseReducer} from './firebaseReducer'\nimport {ADD_NOTE, FETCH_NOTES, REMOVE_NOTE, SHOW_LOADER} from '../types'\n\nconst url = process.env.REACT_APP_DB_URL\n\nexport const FirebaseState = ({children}) => {\n  const initialState = {\n    notes: [],\n    loading: false\n  }\n  const [state, dispatch] = useReducer(firebaseReducer, initialState)\n\n  const showLoader = () => dispatch({type: SHOW_LOADER})\n\n  const fetchNotes = async () => {\n    showLoader()\n    const res = await axios.get(`${url}/notes.json`)\n\n    const payload = Object.keys(res.data).map(key => {\n      return {\n        ...res.data[key],\n        id: key\n      }\n    })\n\n    dispatch({type: FETCH_NOTES, payload})\n  }\n\n  const addNote = async title => {\n    const note = {\n      title, date: new Date().toJSON()\n    }\n\n    try {\n      const res = await axios.post(`${url}/notes.json`, note)\n      const payload = {\n        ...note,\n        id: res.data.name\n      }\n\n      dispatch({type: ADD_NOTE, payload})\n\n    } catch (e) {\n      throw new Error(e.message)\n    }\n  }\n\n  const removeNote = async id => {\n    await axios.delete(`${url}/notes/${id}.json`)\n\n    dispatch({\n      type: REMOVE_NOTE,\n      payload: id\n    })\n  }\n\n  return (\n    <FirebaseContext.Provider value={{\n      showLoader, addNote, removeNote, fetchNotes,\n      loading: state.loading,\n      notes: state.notes\n    }}>\n      {children}\n    </FirebaseContext.Provider>\n  )\n}"]},"metadata":{},"sourceType":"module"}